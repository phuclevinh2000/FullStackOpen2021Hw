(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var a=t(1),c=t.n(a),r=t(15),u=t.n(r),i=(t(6),t(3)),o=t(0),s=function(e){var n=e.name,t=e.number,a=e.handleDelete,c=e.id;return Object(o.jsxs)("div",{children:[n," ",t," ",Object(o.jsx)("button",{onClick:function(){return a(c,n)},children:"delete"})]})},d=function(e){var n=e.head;return Object(o.jsx)("h2",{children:n})},l=function(e){var n=e.handleSubmit,t=e.newName,a=e.handleNameChange,c=e.newNumber,r=e.handleNumberChange;return Object(o.jsxs)("form",{onSubmit:n,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:t,onChange:a})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:c,onChange:r})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var n=e.filterChange,t=e.filterPerson,a=e.filters;return Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:a,onChange:n}),a?t.map((function(e){return Object(o.jsx)(s,{name:e.name,number:e.number},e.name)})):null]})},j=t(4),f=t.n(j),h="http://localhost:3001/persons",m=function(){var e=f.a.get(h);return console.log(e),e.then((function(e){return e.data}))},O=function(e){return f.a.post(h,e).then((function(e){return e.data}))},v=function(e,n){return f.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},p=function(e){var n=e.message;return Object(o.jsx)("div",{className:"notification",children:Object(o.jsx)("p",{children:n})})},g=function(e){var n=e.message;return Object(o.jsx)("div",{className:"fail",children:n})},w=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),u=Object(i.a)(r,2),j=u[0],f=u[1],h=Object(a.useState)(""),w=Object(i.a)(h,2),C=w[0],N=w[1],S=Object(a.useState)(""),k=Object(i.a)(S,2),y=k[0],D=k[1],P=Object(a.useState)(""),E=Object(i.a)(P,2),I=E[0],J=E[1],L=Object(a.useState)(""),T=Object(i.a)(L,2),A=T[0],B=T[1];Object(a.useEffect)((function(){m().then((function(e){c(e)}))}),[]);var M=y?t.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())})):t,q=function(e,n){var a=e;window.confirm("Delete ".concat(n))&&x(a).then((function(n){c(t.filter((function(n){return n.id!==e})))}))};return Object(o.jsxs)("div",{children:[Object(o.jsx)(d,{head:"Phonebook"}),I?Object(o.jsx)(p,{message:I}):null,A?Object(o.jsx)(g,{message:A}):null,Object(o.jsx)(b,{filterChange:function(e){D(e.target.value)},filters:y,filterPerson:M}),Object(o.jsx)(d,{head:"add a new"}),Object(o.jsx)(l,{handleNameChange:function(e){f(e.target.value)},handleNumberChange:function(e){N(e.target.value)},handleSubmit:function(e){e.preventDefault();var n={name:j,number:C},a=t.find((function(e){return e.name===j}));if(""===n.name||""===n.number)alert("missing name or number");else{if(a){if(window.confirm("".concat(j," is already added to phonebook, replace the old number with a new one?"))){var r=t.find((function(e){return e.name===j})).id;v(r,n).then((function(e){var n=t.map((function(n){return n.id!==r?n:e}));c(n)})).catch((function(e){B("Information of ".concat(n.name," has already been removed from server, please refresed the page to see the change")),setTimeout((function(){B(null)}),5e3)}))}}else O(n).then((function(e){c(t.concat(e)),f(""),N(""),J("Added ".concat(n.name)),setTimeout((function(){J(null)}),5e3)})),c(t.concat(n));f(""),N("")}},newName:j,newNumber:C}),Object(o.jsx)(d,{head:"Numbers"}),t.map((function(e){return Object(o.jsx)(s,{id:e.id,name:e.name,number:e.number,handleDelete:q},e.id)}))]})};u.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(w,{})}),document.getElementById("root"))},6:function(e,n,t){}},[[39,1,2]]]);
//# sourceMappingURL=main.c8c08e8e.chunk.js.map